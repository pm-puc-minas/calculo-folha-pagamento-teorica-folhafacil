<p-dialog [header]="'Inicar Hora Extra'" (onHide)="closeModal()" [modal]="true" [(visible)]="isModal" [style]="{ width: '50rem' }" [breakpoints]="{ '1000px': '75vw', '575px': '90vw' }">
        <div class="card flex justify-center">
            <form [formGroup]="horaextraForm" class="mt-2 w-full flex justify-center">
                <p-floatlabel variant="on">
                    <textarea pTextarea id="over_label" rows="4" cols="66" maxlength="200" style="resize: none" class="h-full" formControlName="descricao" required></textarea>
                    <label for="on_label">Descrição</label>
                </p-floatlabel>
            </form>
        </div>
        <p-button label="Salvar" icon="pi pi-check" iconPos="right" (onClick)="salvar()" [disabled]="!isValidForm()" styleClass="mt-2"/>
</p-dialog>
<main class="w-full">
    <div class="w-full">
        <div class="w-full p-4 bg-main-500 text-center text-white text-1xl font-semibold">Minhas Horas Extras</div>
    </div>
    <div class="card">
        <p-table [value]="horasExtras || []" sortField="price" [sortOrder]="-1" [scrollable]="true"
            scrollHeight="60vh" [tableStyle]="{ 'min-width': '60rem' }">
            <ng-template #header class="bg-main-100">
                <tr>
                    <th pSortableColumn="dataInicio" style="width:20%">
                        <div class="flex items-center gap-2">
                            Inicio
                            <p-sortIcon field="dataInicio" />
                        </div>
                    </th>
                    <th pSortableColumn="dataFim" style="width:20%">
                        <div class="flex items-center gap-2">
                            Fim
                            <p-sortIcon field="dataFim" />
                        </div>
                    </th>
                    <th pSortableColumn="descricao" style="width:40%">
                        <div class="flex items-center gap-2">
                            Descrição
                            <p-sortIcon field="descricao" />
                        </div>
                    </th>
                    <th pSortableColumn="status" style="width:10%">
                        <div class="flex items-center gap-2">
                            Status
                            <p-sortIcon field="status" />
                        </div>
                    </th>
                    <th style="width:20%">
                        <div class="flex items-center gap-2">
                        </div>
                    </th>
                </tr>
            </ng-template>
            <ng-template #body let-horasExtra>
                <tr>
                    <td>{{ horasExtra.dataInicio | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                    <td>{{ horasExtra.dataFim | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                    <td class="warp-col">{{ horasExtra.descricao }}</td>
                    <td><p-tag [value]="horasExtra.status" [severity]="getServerityStatus(horasExtra.status)"></p-tag></td>
                    <td>
                        <div class="w-full flex flex-row justify-center space-x-3" *ngIf="horasExtra.status == 'EM_ANDAMENTO'">
                            <div class="card flex justify-center gap-2">
                                <p-confirmpopup #cp>
                                    <ng-template #headless let-message>
                                        <div class="rounded p-4">
                                            <span>{{ message.message }}</span>
                                            <div class="flex items-center gap-2 mt-4">
                                                <p-button (onClick)="cp.onAccept()" label="Finalizar" size="small" styleClass="p-danger" />
                                                <p-button (onClick)="cp.onReject()" label="Cancelar" [text]="true" size="small"/>
                                            </div>
                                        </div>
                                    </ng-template>
                                </p-confirmpopup>
                                <p-button icon="pi pi-stop" [rounded]="true" styleClass="p-danger" (onClick)="finalizar($event, horasExtra.id)" />
                            </div>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <div class="w-full">
        <div class="w-full p-4 bg-main-500">
            <p-button label="Novo" icon="pi pi-plus-circle" (click)="novo()" />
        </div>
    </div>
</main>

